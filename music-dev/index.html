<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="shortcut icon" href="./favicon.png">
<title>音乐播放器（测试版）</title>
<style>
:root {
    --bg: #0f1720;
    --panel: #0b1220;
    --accent: #1fb6ff;
    --muted: #94a3b8;
    --text: #e6eef6;
    --transition: 240ms cubic-bezier(.2,.9,.2,1);
    --shadow: 0 6px 18px rgba(2,6,23,0.6);
}

* {
    box-sizing: border-box
}

html,body {
    height: 100%;
    margin: 0;
    /*background: linear-gradient(180deg,#071021 0%, #081426 100%);*/
    color: var(--text);
    font-family: Inter, "Helvetica Neue", Arial, "Noto Sans SC", "PingFang SC", "Hiragino Sans GB", "Microsoft Yahei", sans-serif
}

/* === 全局滚动条美化 - 音乐播放器风格 === */

/* WebKit 浏览器（Chrome, Safari, Edge） */
::-webkit-scrollbar {
    width: 8px;    /* 竖向滚动条宽度 */
    height: 8px;   /* 横向滚动条高度（如有） */
}

::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 10px;
    margin: 4px 0; /* 上下留空，更精致 */
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.12); /* 默认半透明白色 */
    border-radius: 10px;
    transition: background 0.2s ease;
    background-clip: padding-box;
    border: 2px solid transparent; /* 内发光效果的关键 */
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.25);
}

::-webkit-scrollbar-thumb:active {
    background: var(--accent, #1db954); /* 使用你的主题色，如 Spotify 绿 */
    border-color: transparent;
}

/* Firefox 支持（基础美化） */
* {
    scrollbar-width: thin; /* 'auto' | 'thin' | 'none' */
    scrollbar-color: rgba(255,255,255,0.15) transparent; /* thumb color | track color */
}

/* 可选：让滚动条在非悬停时更透明 */
body {
    scrollbar-gutter: stable; /* 防止内容跳动（现代浏览器支持） */
}

/* 让滚动条只在滚动容器内显示 */
.app-container,
.player-main,
.lyrics-scroll,
.lyrics-container {
    scrollbar-gutter: stable;
}

/* ===== 导航栏：始终在顶部，左右分散对齐 ===== */
.app-nav {
    padding: 10px;
    display: flex;
    justify-content: space-between; /* 左右分散 */
    align-items: center;
    max-height: 60px;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(5px);
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.app-nav .section-header {
    text-align: right;
}

/* ===== 主容器：控制整体布局和最小高度 ===== */
.app-container {
    display: flex;
    gap: 2px;
    padding: 10px 20px;
    flex-wrap: wrap;
    justify-content: center;
    align-items: flex-start;

    /* 关键：最小高度 = 视口高度 - 170px */
    max-height: calc(100vh - 110px - 60px);

    /* 确保内容区域不被压缩得太小 */
    box-sizing: border-box;
}

/* ===== 播放器主区域 ===== */
.player-main {
    /*background: linear-gradient(180deg, rgba(255,255,255,0.05), transparent);*/
    background: rgba(255,255,255,0.02);
    padding: 20px;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    min-width: 320px;
    /*box-shadow: var(--shadow, 0 4px 20px rgba(0,0,0,0.2));*/
    align-items: center;
    text-align: center;
    flex: 1 1 320px;
    transition: padding 0.3s ease;
}

.album-cover {
    width: 140px;
    height: 140px;
    border-radius: 10px;
    background: linear-gradient(135deg,#0b1220,#0f2430);
    flex: 0 0 140px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--muted);
    font-size: 14px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2)
}

.track-title {
    font-size: 1.2em;
    font-weight: 700;
    margin: 0 0 8px 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap
}

.track-artist {
    color: var(--muted);
    font-size: 0.9em;
    margin: 0 0 16px 0
}

.music-info {
    padding: 10px 0;
}

/* ===== 歌词区域：关键修改 ===== */
.lyrics-section {
    margin: 0;
    /*padding: 8px;*/
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 320px;
    flex: 1 1 320px;
    /* 关键：允许自身伸缩，但不设置 max-height */
    overflow: hidden; /* 防止子元素溢出 */
}

.lyrics-container {
    background: rgba(255,255,255,0.02);
    padding: 8px;
    border-radius: 8px;
    /* 关键：移除 max-height 和 flex: 1，改为精确计算高度 */
    display: flex;
    flex-direction: column;
    /* 关键：计算高度：100% 减去 "歌词" 标题的高度 (约 12px + 2*12px padding) */
    height: calc(100vh - 110px - 60px - 20px);
    overflow: hidden; /* 确保内部滚动条不撑开容器 */
}

.lyrics-scroll {
    /* 关键：不再使用 flex: 1 或 height: 100%，而是直接填充 lyrics-container 的剩余空间 */
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 0 8px;
    scrollbar-width: thin;
}

/*
.lyrics-scroll::-webkit-scrollbar {
    width: 6px;
}

.lyrics-scroll::-webkit-scrollbar-track {
    background: transparent;
}

.lyrics-scroll::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.1);
    border-radius: 3px;
}*/

.lyrics-line {
    padding: 6px 0;
    text-align: center;
    color: #aaa;
    transition: all 0.3s ease;
    line-height: 1.6;
}

.lyrics-line-current {
    color: var(--accent, #1db954);
    font-weight: 600;
    font-size: 1.1em;
    transform: scale(1.05);
}

.lyrics-line-faded {
    opacity: 0.7;
    transform: scale(0.95);
}

/* ===== 小屏响应式：并排布局 ===== */
@media (max-width: 499px) {
    .player-main {
        flex-direction: row;     /* 改为横向排列 */
        align-items: center;     /* 垂直居中对齐 */
        padding: 12px;
        text-align: left;
        max-height: 60px;
        gap: 16px;               /* album 与 info 的间距 */
    }

    .album-cover {
        width: 50px;
        height: 50px;
        margin-bottom: 0;        /* 取消下边距 */
        margin-right: 0;         /* 由 gap 控制间距 */
        flex: 0 0 50px;
    }

    .music-info {
        align-items: flex-start; /* 左对齐 */
        flex: 1;                 /* 占据剩余空间 */
        min-width: 0;            /* 允许收缩，避免溢出 */
    }

    .track-title {
        font-size: 1.1em;
        margin: 4px 0 2px;
    }

    .track-artist {
        font-size: 0.8em;
    }
    .lyrics-section {
        /* 在窄屏下，它需要占据除去 player-main 后的全部剩余高度 */
        flex: 1;
        min-height: 200px;
        padding: 5px 12px;
    }

    .lyrics-container {
        /* 高度计算方式不变，因为 .lyrics-section 的高度已经是剩余空间 */
        height: calc(100vh - 110px - 60px - 60px - 20px);
    }
}
  /* 控制面板区域 */
.control-panel {
    width: 380px;
    min-width: 320px;
    max-width: 40%;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding: 20px;
/*border-radius:12px;*/
    box-shadow: var(--shadow);
    display: flex;
    flex-direction: column;
    gap: 16px
}
  /* 顶部标题 */
.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px
}

.section-title {
    font-weight: 600;
    font-size: 16px;
    color: var(--accent)
}

.small-text {
    font-size: 12px;
    color: var(--muted)
}


/* ===== 按钮基础样式（所有按钮共享） ===== */
.control-btn,
.slide-toggle,
.mode-btn {
    background: transparent;
    border: none;
    box-shadow: 0 0 0 1px rgba(210, 210, 210, 0.8); /* 微灰半透明边框 */
    color: var(--text);
    padding: 6px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all var(--transition);
    /* 子像素抗锯齿优化 */
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-font-smoothing: subpixel-antialiased;
    /* 默认显示为行内块，便于控制 */
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.player-area .control-btn,
.player-area .slide-toggle {
    border-radius: 50%;
}

/* ===== 按钮悬停状态（普通按钮） ===== */
.control-btn:hover:not(.primary),
.slide-toggle:hover:not(.primary),
.mode-btn:hover {
    background: rgba(255, 255, 255, 0.02);
    /* 悬停时保留基础边框 */
    box-shadow: 0 0 0 1px rgba(210, 210, 210, 0.8);
}

/* ===== 主按钮样式（.primary） ===== */
.control-btn.primary,
.slide-toggle.primary {
    background: linear-gradient(90deg, var(--accent), #6dd3ff);
    color: #042033;
    box-shadow: 0 4px 8px rgba(31, 182, 255, 0.2); /* 主色投影 */
}

/* ===== 主按钮悬停状态 ===== */
.control-btn.primary:hover,
.slide-toggle.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(31, 182, 255, 0.3);
}

  /* 播放器区域样式 */
.player-area {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.6); /* 可选背景 */
      box-shadow: 0 0 1px 1px var(--accent);
  padding: 8px 16px;
  display: flex;
  flex-direction: column;
  gap: 6px; /* 三行之间紧凑间距 */
  z-index: 1000;
  font-size: 14px;
  color: #fff;
}

.player-row {
  display: flex;
  align-items: center;
}

/* 第一行：音量左 + 按钮右 */
.row-top {
  justify-content: space-between;
}

.volume-container {
    display: flex;
    align-items: center;
    gap: 12px;
}

/* ===== 音量条美化（可选不同配色） ===== */
.volume-slider {
  width: 80px;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  outline: none;
  border-radius: 4px;
  cursor: pointer;
}

.volume-slider::-webkit-slider-runnable-track {
  height: 6px;
  border-radius: 4px;
  background: linear-gradient(
    to right,
    #666 0%,
    #666 var(--volume, 70%),
    rgba(255,255,255,0.1) var(--volume, 70%),
    rgba(255,255,255,0.1) 100%
  );
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 1px 4px rgba(0,0,0,0.3);
  cursor: pointer;
  margin-top: -3px;
}

.volume-slider::-moz-range-track {
  height: 6px;
  border-radius: 4px;
  background: rgba(255,255,255,0.1);
}

.volume-slider::-moz-range-progress {
  height: 6px;
  border-radius: 4px 0 0 4px;
  background: #666;
}

.volume-slider::-moz-range-thumb {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #fff;
  border: none;
  box-shadow: 0 1px 4px rgba(0,0,0,0.3);
  cursor: pointer;
}

.volume-slider::-moz-focus-outer {
  border: 0;
}
/* ===音量条美化结束 */

.extra-buttons {
  display: flex;
  gap: 8px;
}

/* 第二行：进度条撑满 */
.row-progress {
  width: 100%;
}

.progress-container {
  display: flex;
  align-items: center;
  width: 100%;
  gap: 12px;
  padding:2px;
}

.time-display {
  font-size: 12px;
  color: var(--muted, #aaa);
  min-width: 42px;
  text-align: center;
}

/* ===== 音乐进度条美化 ===== */
.progress-slider {
  flex: 1;
  -webkit-appearance: none;
  appearance: none;
  height: 6px;
  background: transparent; /* 关键：清空默认背景，用 ::before 伪元素或滑块轨道绘制 */
  outline: none;
  border-radius: 6px;
  cursor: pointer;
}

/* Webkit: 轨道样式 */
.progress-slider::-webkit-slider-runnable-track {
  height: 6px;
  border-radius: 6px;
  background: linear-gradient(
    to right,
    var(--accent, #1fb6ff) 0%,
    var(--accent, #1fb6ff) var(--progress, 0%),
    rgba(255,255,255,0.1) var(--progress, 0%),
    rgba(255,255,255,0.1) 100%
  );
}

/* Webkit: 滑块（thumb）样式 */
.progress-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  cursor: pointer;
  margin-top: -4px; /* 垂直居中对齐轨道 */
}

/* Firefox: 轨道样式 */
.progress-slider::-moz-range-track {
  height: 6px;
  border-radius: 6px;
  background: rgba(255,255,255,0.1);
}

/* Firefox: 已播放部分 —— 需要 JS 动态设置 */
.progress-slider::-moz-range-progress {
  height: 6px;
  border-radius: 6px 0 0 6px;
  background: var(--accent, #1fb6ff);
}

/* Firefox: 滑块样式 */
.progress-slider::-moz-range-thumb {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #fff;
  border: none;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  cursor: pointer;
}

/* 去除 Firefox 默认聚焦轮廓 */
.progress-slider::-moz-focus-outer {
  border: 0;
}

/* ===音乐进度条美化结束=== */

/* 第三行：五个按钮整体居中 */
.row-controls {
  justify-content: center; /* 关键：整体居中 */
  gap: 16px; /* 控制按钮间距，可根据喜好调整 12px~20px */
  width: 100%;
}

.row-controls .control-btn {
    /* 不再重复定义 padding, cursor, transition 等已有属性 */
    /* 只补充控制栏特有的交互效果 */
    transition: transform 0.1s ease, opacity 0.2s ease; /* 更精细的微交互动画 */
}

.row-controls .control-btn:hover {
    opacity: 0.8;
    transform: scale(1.05);
}

/* 不再需要 .primary 的 margin: 0 auto */
/* .row-controls .primary {
  margin: 0 auto;
} */

.control-btn svg {
  width: 18px;
  height: 18px;
}

.control-btn:hover {
  opacity: 0.8;
  transform: scale(1.05); /* 可选：轻微放大 */
}
  /* API控制区域 */
.api-section {
    display: flex;
    flex-direction: column;
    gap: 16px
}

.mode-toggle {
    display: flex;
    gap: 8px;
    align-items: center;
    padding: 8px 0;
}

.mode-btn {
    background: transparent;
  /* 移除border，使用box-shadow实现更精细的灰色边框 */
    border: none;
    box-shadow: 0 0 0 1px rgba(210, 210, 210, 0.5);
 /* 浅灰色半透明边框 */
    color: var(--muted);
    font-size: 13px;
    cursor: pointer;
    transition: all var(--transition);
}

.mode-btn.active {
    background: linear-gradient(90deg, var(--accent), #6dd3ff);
    color: #052234;
  /* 激活状态移除边框阴影 */
    box-shadow: none;
  /* 添加轻微上浮效果 */
    transform: translateY(-1px);
  /* 主色投影增强层次感 */
    filter: drop-shadow(0 2px 4px rgba(31, 182, 255, 0.3));
}
  /* 输入区域 */
.input-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
    background: rgba(255,255,255,0.02);
    padding: 12px;
    border-radius: 10px
}

.input-row {
    display: flex;
    gap: 10px;
    align-items: center;
    flex-wrap: wrap
}

.input-row select, .input-row input, .full-input {
    padding: 10px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.04);
    background: transparent;
    color: var(--text);
    font-size: 14px;
    flex: 1 0 auto;
    min-width: 140px
}

.input-row select {
    min-width: 140px
}

.full-input {
    width: 100%
}

.api-actions {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-top: 8px
}


/* 关于 */
.about-section {
    display: flex;
    flex-direction: column;
    padding: 12px;
    gap: 12px;
    flex: 1;
    min-height: 200px
}
.about-container {
    background: rgba(255,255,255,0.02);
    overflow-y: auto;
    position: fixed;
    padding: 12px;
    top: 60px;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: calc(100vh - 60px);
    width: 100%;
}

  /* 歌单区域 */
.playlist-section {
    display: flex;
    flex-direction: column;
    padding: 12px;
    gap: 12px;
    flex: 1;
    min-height: 200px
}

.playlist-container {
    background: rgba(255,255,255,0.02);
    overflow-y: auto;
    position: fixed;
    padding: 12px;
    top: 60px;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: calc(100vh - 60px);
    width: 100%;
    /*background:transparent;border-radius:8px;overflow-y:hidden;display:flex;flex-direction:column;gap:8px;flex:1*/
    /*background:rgba(255,255,255,0.02);border-radius:10px;max-height:240px;overflow:auto*/
}

.playlist-scroll {
    overflow-y: auto;
    padding: 8px;
    flex: 1
}

.playlist-scroll::-webkit-scrollbar {
    width: 6px
}

.playlist-scroll::-webkit-scrollbar-track {
    background: transparent
}

.playlist-scroll::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.1);
    border-radius: 3px
}

.playlist-item {
    display: flex;
    gap: 12px;
    align-items: center;
    padding: 10px;
    border-radius: 8px;
    cursor: pointer;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    border: 1px solid rgba(255,255,255,0.02);
    transition: all var(--transition)
}

.playlist-item:hover {
    background: rgba(255,255,255,0.03);
    opacity: 0.8;
    transform: scale(0.99);
}

.playlist-item.active {
    outline: 2px solid rgba(31,182,255,0.12);
    background: linear-gradient(90deg, rgba(31,182,255,0.06), transparent);
    transform: translateX(0)
}

.playlist-thumb {
    width: 50px;
    height: 50px;
    border-radius: 6px;
    background: linear-gradient(90deg,#223a52,#123a6b);
    flex: 0 0 50px;
    object-fit: cover
}

.playlist-meta {
    flex: 1;
    min-width: 0
}

.playlist-title {
    font-weight: 600;
    font-size: 14px;
    color: #eaf6ff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis
}

.playlist-artist {
    font-size: 12px;
    color: var(--muted);
    margin-top: 4px
}

.playlist-duration {
    font-size: 13px;
    color: var(--muted);
    min-width: 40px;
    text-align: right
}



/*.controlTab-content > .api-section {
    padding: 0 10px;
}*/

/* 推荐区域 */
.recommend-section {
    display: flex;
    flex-direction: column;
    gap: 12px
}

.recommend-container {
    background: rgba(255,255,255,0.02);
    overflow-y: auto;
    position: fixed;
    padding: 12px;
    top: 60px;
    bottom: 0;
    left: 0;
    right: 0;
    max-height: calc(100vh - 60px);
    width: 100%;
}

.recommend-item {
    display: flex;
    gap: 12px;
    align-items: center;
    padding: 10px;
    margin: 6px 0;
    border-radius: 8px;
    cursor: pointer;
    border: 1px solid rgba(255,255,255,0.02);
    transition: all var(--transition);
    /*背景改为由js控制*/
}

.recommend-item:hover {
    opacity: 0.8;
    transform: scale(0.99);
}

.recommend-thumb {
    width: 50px;
    height: 50px;
    border-radius: 6px;
    background: linear-gradient(90deg,#223a52,#123a6b);
    flex: 0 0 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #aaa;
    font-size: 10px;
    text-align: center;
    line-height: 1.2;
}

.recommend-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 6px;
}

/*.recommend-thumb.no-thumb {
    background: #2a2a2a;
    color: #666;
}*/

.recommend-meta {
    flex: 1;
    min-width: 0;
}

.recommend-title {
    font-weight: 600;
    font-size: 14px;
    color: #eaf6ff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.recommend-desc {
    font-size: 12px;
    color: var(--muted);
    margin-top: 4px;
}

.recommend-arrow {
    color: var(--accent);
    font-weight: bold;
}

  /* 通知提示 */
#playerNotice {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 80px;
    padding: 10px 16px;
    background: rgba(0,0,0,0.8);
    color: #fff;
    border-radius: 8px;
    z-index: 9999;
    display: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translate(-50%,10px)
    }

    to {
        opacity: 1;
        transform: translate(-50%,0)
    }
}


        /* 遮罩层 */
.slide-container-mask {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease;
}

        /* 遮罩层激活状态 */
.slide-container-mask.active {
    opacity: 1;
    visibility: visible;
}

        /* 侧滑容器基础样式 */
.slide-container {
    background: linear-gradient(180deg,#071021 0%, #081426 100%);
            /*background: green;*/
    box-shadow: 0 0 1px 1px var(--accent);
    color: var(--text);
    position: fixed;
    top: 0;
    width: 100%;
    max-width: 500px;
    min-width: 300px;
    height: 100%;
    z-index: 1000;
    transition: transform 0.3s ease;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
}

        /* 关闭按钮 */
.slide-container .close-btn {
    color: var(--text);
    position: absolute;
    top: 20px;
    right: 20px;
    width: 30px;
    height: 30px;
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    z-index: 1001;
}

        /* 不同方向的滑出效果 */
.slide-from-left {
    left: 0;
    transform: translateX(-100%);
}

.slide-from-right {
    right: 0;
    transform: translateX(100%);
}

.slide-from-top {
    top: 0;
    left: 0;
    right: 0;
    width: auto;
    max-width: none;
    transform: translateY(-100%);
}

.slide-from-bottom {
    bottom: 0;
    top: auto;
    left: 0;
    right: 0;
    width: auto;
    max-width: none;
    transform: translateY(100%);
}

        /* 激活状态 */
.slide-container.active {
    transform: translateX(0) translateY(0);
}

        /* 响应式处理 */
        /* 当屏幕宽度小于等于 500px 时才取 100% 宽度 */
@media (max-width: 500px) {
    .slide-container {
        width: 100%;
        max-width: 100vw;
        min-width: 100%;
        left: 0;
        right: 0;
        border-radius: 0;
        padding: 20px 15px;
    }

    .slide-from-left,
            .slide-from-right,
            .slide-from-top,
            .slide-from-bottom {
        width: 100%;
        left: 0;
        right: 0;
    }
}

.controlTab-nav {
    display: flex;
    margin: 0;
    padding: 0;
    list-style: none;
}

.controlTab-nav li {
    padding: 5px;
    cursor: pointer;
    border-bottom: none;
    border-radius: 5px 5px 0 0;
    margin-right: 5px;
}

.controlTab-nav li.active {
    position: relative;
    top: 1px;
    font-weight: bold;
}

.controlTab-content {
            /*border-radius: 0 5px 5px 5px;*/
}

.controlTab-panel {
    display: none;
}

.controlTab-panel.active {
    display: block;
}
        /* 新Select样式 */
.select-wrapper {
    position: relative;
    margin-bottom: 15px;
}

.select-label {
    display: block;
    margin-bottom: 10px;
    color: var(--muted);
    font-size: 14px;
    font-weight: 500;
}

select {
    width: 100%;
    padding: 14px 50px 14px 16px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: rgba(255, 255, 255, 0.03);
    color: var(--text);
    font-size: 15px;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    transition: all var(--transition);
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
        
        /* 自定义下拉箭头 */
.select-wrapper::after {
    content: "";
    position: absolute;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    width: 14px;
    height: 14px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2394a3b8'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-size: contain;
    pointer-events: none;
    transition: transform var(--transition);
}
        
        /* 悬停效果 */
select:hover {
    border-color: rgba(255, 255, 255, 0.15);
    background: rgba(255, 255, 255, 0.05);
}
        
        /* 聚焦状态 */
select:focus {
    outline: none;
    border-color: rgba(31, 182, 255, 0.4);
    box-shadow: 0 0 0 3px rgba(31, 182, 255, 0.15);
}
        
        /* 禁用状态 */
select:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
        
        /* 自定义option样式 */
select option {
    background: var(--panel);
    color: var(--text);
    padding: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.03);
}

select option:checked {
    background: linear-gradient(90deg, rgba(31, 182, 255, 0.1), transparent);
    color: var(--accent);
    font-weight: 600;
}

/* ===== 创建一个全局遮罩层，用于承载基础深色背景 ===== */
#global-bg-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* 设置为您想要的深色背景 */
    background: #0f1720; /* 与您的 --bg 保持一致 */
    /* 关键：层级设置在 dynamic-bg 之下，但在所有内容之下 */
    z-index: -2;
    /* 确保它不会阻挡任何交互 */
    pointer-events: none;
}
/* ===== 沉浸式动态背景 ===== */
#dynamic-bg {
  /* 初始背景色，可根据主题调整 */
  background: #0f1720;
  /* 固定定位，全屏覆盖 */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /* 确保在所有内容之下 */
  z-index: -1;
  /* 平滑过渡效果 */
  transition: background-image 1s ease-in-out;
  /* 背景设置 */
  background-attachment: fixed;
  background-position: center center;
  background-size: cover;
  background-repeat: no-repeat;
}
/* 遮罩层：使用伪元素实现 */
#dynamic-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /* 深色遮罩，您可以调整颜色和透明度 */
  background: rgba(7, 8, 35, 0.4); /* 深色 40% 不透明度 */
  /* background: linear-gradient(180deg,#071021 0%, #081426 100%); (7,16,33) (8,0,38)*/
  /* 确保遮罩在背景图片之上，但在内容之下 */
  z-index: 1;
  /* 遮罩不需要过渡动画 */
  transition: none;
}
/* 当背景图片加载完成后，移除初始颜色，让图片成为唯一背景 */
#dynamic-bg.has-bg {
  background-color: transparent;
  /* 模糊滤镜，营造沉浸感 */
  filter: blur(40px);
  /* 降低不透明度，避免喧宾夺主 */
  opacity: 0.85;
}
</style>
</head>
<body>
  <!-- 沉浸式动态背景容器 -->
  <div id="dynamic-bg"></div>
  <!-- 全局深色背景遮罩层 -->
  <div id="global-bg-overlay"></div>
<div class="app-nav">
    <div class="main-title">
        <div class="section-title">音乐播放器</div>
        <div class="small-text">基于 Meting API 开发</div>
    </div>
    <div class="section-header">
      <div class="small-text">V 0.5.2</div>
    </div>
</div>
<div class="app-container">
  <!-- 播放器主区域 -->
  <div class="player-main">
    <div class="album-cover" id="albumCover">暂无图片</div>
    <div class="music-info">
        <div class="track-title" id="trackTitle">暂无歌曲</div>
        <div class="track-artist" id="trackArtist">——</div>
    </div>

  </div>

  <div class="lyrics-section">
    <!--<div class="small-text">歌词</div>-->
    <div class="lyrics-container">
      <div id="lyricsDisplay" class="lyrics-scroll">
        <div class="small-text" id="lyricsPlaceholder">暂无歌词</div>
      </div>
    </div>
  </div>
  
</div>

<div class="player-area">
  <!-- 第一行：音量左 + 按钮右 -->
  <div class="player-row row-top">
    <div class="volume-container">
      <div class="small-text" title="音量">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-down" viewBox="0 0 16 16"><path d="M9 4a.5.5 0 0 0-.812-.39L5.825 5.5H3.5A.5.5 0 0 0 3 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 9 12zM6.312 6.39 8 5.04v5.92L6.312 9.61A.5.5 0 0 0 6 9.5H4v-3h2a.5.5 0 0 0 .312-.11M12.025 8a4.5 4.5 0 0 1-1.318 3.182L10 10.475A3.5 3.5 0 0 0 11.025 8 3.5 3.5 0 0 0 10 5.525l.707-.707A4.5 4.5 0 0 1 12.025 8"/></svg>
      </div>
      <input id="volumeSlider" class="volume-slider" type="range" min="0" max="1" step="0.01" value="0.2" />
    </div>

    <!-- 预留两个按钮 -->
    <div class="extra-buttons">
    <button class="control-btn slide-toggle" data-target="configAndParse-container" title="设置与推荐">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sliders2" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M10.5 1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4H1.5a.5.5 0 0 1 0-1H10V1.5a.5.5 0 0 1 .5-.5M12 3.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m-6.5 2A.5.5 0 0 1 6 6v1.5h8.5a.5.5 0 0 1 0 1H6V10a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5M1 8a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 1 8m9.5 2a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V13H1.5a.5.5 0 0 1 0-1H10v-1.5a.5.5 0 0 1 .5-.5m1.5 2.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5"/>
        </svg>
    </button>
    <button class="control-btn slide-toggle" data-target="currentPlaylist-container" title="当前歌单">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
        </svg>
    </button>
    </div>
  </div>

  <!-- 第二行：进度条 -->
  <div class="player-row row-progress">
    <div class="progress-container">
      <div class="time-display" id="currentTime">00:00</div>
      <input id="progressSlider" class="progress-slider" type="range" min="0" max="100" step="0.01" value="0" />
      <div class="time-display" id="durationTime">00:00</div>
    </div>
  </div>

  <!-- 第三行：控制按钮（播放居中） -->
  <div class="player-row row-controls">
    <button class="control-btn" id="orderBtn" title="顺序播放">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"/></svg>
    </button>
    <button class="control-btn" id="prevBtn" title="上一首">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-start-fill" viewBox="0 0 16 16"><path d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0z"/></svg>
    </button>
    <button class="control-btn primary" id="playBtn" title="播放与暂停">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16"><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/></svg>
    </button>
    <button class="control-btn" id="nextBtn" title="下一首">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-end-fill" viewBox="0 0 16 16"><path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0z"/></svg>
    </button>
    <button class="control-btn" id="loopBtn" title="循环设置">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-repeat" viewBox="0 0 16 16"><path d="M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"/></svg>
    </button>
  </div>
</div>

<!-- 控制面板区域 -->
<div id="configAndParse-container" class="control-container control-panel slide-container slide-from-left">
<button class="close-btn">&times;</button>

  <div class="controlTabs mycontrolTabs">

    <ul class="controlTab-nav">
        <li class="active" data-controlTab="controlTab-match-API">解析器</li>
        <li data-controlTab="controlTab-about">关于</li>
    </ul>

    <div class="controlTab-content">
      <!-- API控制区域 -->
      <div id="controlTab-match-API" class="api-section controlTab-panel active">
        <div class="section-header">
          <div class="section-title">API 解析控制</div>
        </div>
        <div class="mode-toggle">
          <button id="easyModeBtn" class="mode-btn active">简易模式</button>
          <button id="fullModeBtn" class="mode-btn">完整模式</button>
          <div class="small-text" style="margin-left:auto">更新后加载歌单</div>
        </div>
        <!-- 简易模式 -->
        <div class="input-container" id="easyModeContainer">
          <div class="input-row">
            <select id="apiBase"></select> <!-- 由 JS 动态填充 -->
            <select id="apiServer"></select> <!-- 由 JS 动态填充 -->
          </div>
          <div class="input-row">
            <select id="apiType"></select> <!-- 由 JS 动态填充 -->
            <input id="apiId" type="text" placeholder="输入ID（歌单或单曲）或关键词（搜索，不要有空格）" />
          </div>
        </div>
        <!-- 完整模式 -->
        <div class="input-container" id="fullModeContainer" style="display:none;">
          <input id="fullApiInput" class="full-input" type="text" placeholder="完整 Meting API（例如 https://apivc-meting.sakurink.eu.org/api?server=netease&type=playlist&id=...）" />
        </div>
        <div class="api-actions">
          <button id="loadApiBtn" class="control-btn primary">更新歌单</button>
          <button id="clearPlaylistBtn" class="control-btn">清空歌单</button>
        </div>
      </div>
      <!-- 关于页面 -->
      <div id="controlTab-about" class="api-section controlTab-panel">
        <div class="about-section">
          <div class="about-container">
            <div style="text-align: center;">音乐播放器（测试版）</div>
            <p>基于 Meting API 开发，支持 Meting API 格式数据解析。已初步实现基本功能。</p>
            <p>开发中，不代表最终品质。</p>

          </div>
        </div>
      </div>
      
    </div>
  </div>
</div>



<div id="currentPlaylist-container" class="control-container control-panel slide-container slide-from-right">
    <button class="close-btn">&times;</button>
  <div class="controlTabs mycontrolTabs">

    <ul class="controlTab-nav">
        <li class="active" data-controlTab="controlTab-playlist">当前歌单</li>
        <li data-controlTab="controlTab-recommend">推荐</li>
    </ul>

    <div class="controlTab-content">
      <div id="controlTab-playlist" class="api-section controlTab-panel active">
        <!-- 歌单区域 -->
          <!--<div class="section-header">
            <div class="section-title">歌单</div>
            <div class="small-text">点击播放</div>
          </div>-->
        <div class="playlist-section">
          <div class="playlist-container">
            <div id="playlistDisplay" class="playlist-scroll">
              <div class="small-text">暂无歌曲，使用“更新歌单”加载</div>
            </div>
          </div>
        </div>
      </div>

      <!-- 推荐区域 -->
      <div id="controlTab-recommend" class="api-section controlTab-panel">
        <div class="section-header">
          <div class="section-title"></div>
        </div>
        <div class="recommend-container" id="recommendContainer"></div>
        <!--<div class="recommend-container" id="recommendContainer">
          <div class="recommend-item" data-meta='{"type":"playlist","id":"8510095321","server":"netease","api":""}'>
            <div class="recommend-thumb"></div>
            <div class="recommend-meta">
              <div class="recommend-title">热门推荐歌单</div>
              <div class="recommend-desc">点击解析并加载</div>
            </div>
            <div class="recommend-arrow">→</div>
          </div>
          <div class="recommend-item" data-meta='{"type":"playlist","id":"2619366284","server":"netease","api":""}'>
            <div class="recommend-thumb"></div>
            <div class="recommend-meta">
              <div class="recommend-title">经典老歌精选</div>
              <div class="recommend-desc">点击解析并加载</div>
            </div>
            <div class="recommend-arrow">→</div>
          </div>
          <div class="recommend-item" data-meta='{"type":"song","id":"591321","server":"netease","api":""}'>
            <div class="recommend-thumb"></div>
            <div class="recommend-meta">
              <div class="recommend-title">热门单曲推荐</div>
              <div class="recommend-desc">点击直接播放</div>
            </div>
            <div class="recommend-arrow">→</div>
          </div>-->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 音频元素 -->
<audio id="audioPlayer" crossorigin="anonymous"></audio>

<!-- 通知提示元素 -->
<div id="playerNotice"></div>
<script>
function setLyricsContainerHeight() {
    const container = document.querySelector('.lyrics-container');
    if (!container) return;

    // 使用 window.innerHeight 获取真实的可视窗口高度
    const navbarHeight = 60;     // .app-nav 高度
    const playerMainMinHeight = 110; // .player-main 最小占用高度（PC 和 mobile 不同）
    const paddingOrGap = 20;     // 间距

    // 计算可用高度
    let availableHeight = window.innerHeight - navbarHeight - playerMainMinHeight - paddingOrGap;

    // 在小屏横向布局下，可能还需要减去 .player-main 的实际高度（如果是固定高）
    if (window.innerWidth <= 499) {
        availableHeight -= 60; // 减去 .player-main 在 media query 中设的 max-height: 60px
    }

    // 设置最小保护高度
    container.style.height = `${Math.max(availableHeight, 160)}px`;
}

// 初始化 + resize 监听
window.addEventListener('load', setLyricsContainerHeight);
window.addEventListener('resize', setLyricsContainerHeight);
window.addEventListener('orientationchange', () => {
    // 延迟执行，确保尺寸稳定
    setTimeout(setLyricsContainerHeight, 300);
});
</script>
<script type="text/javascript" src="https://apis0-meting.lolic.dpdns.org/others/player-conf/config.js"></script>
<script type="text/javascript" src="./player.js"></script>

<script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>